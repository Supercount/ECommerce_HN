<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">

<div class="container-xl">
    <div class="table-responsive">
        <div class="table-wrapper">
            <div class="table-title">
                <h2><b>Gestion </b> des utilisateurs </h2>
            </div>
            <div class="row">
                <div class="signup-form">
                    <form action="/examples/actions/confirmation.php" method="post">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-3"><input [(ngModel)]="newUser.lastname" type="text"
                                        class="form-control" name="last_name" placeholder="Nom" required="required">
                                </div>
                                <div class="col-2"><input [(ngModel)]="newUser.firstname" type="text"
                                        class="form-control" name="first_name" placeholder="Prénom" required="required">
                                </div>

                                <div class="col-4">
                                    <input [(ngModel)]="newUser.email" type="email" class="form-control" name="email"
                                        placeholder="Email" required="required">
                                </div>
                                <div class="col-2">
                                    <input [(ngModel)]="newUser.role" type="text" class="form-control" name="role"
                                        placeholder="Rôle" required="required">
                                </div>
                                <div class="col-1">
                                    <button *ngIf="!myCondition" (click)="addUser()" type="button"
                                        class="btn btn-primary btn-sm">Enregistrer</button>
                                    <button *ngIf="myCondition" (click)="updateUser()" type="button"
                                        class="btn btn-primary btn-sm">Modifier</button>

                                </div>
                            </div>
                        </div>


                    </form>
                </div>
            </div>
            <div *ngIf="myArray.length==0" class="alert alert-warning w-50 mx-auto"> Aucun utilisateur trouvé
            </div>

            <div class="table-filter" *ngIf="myArray.length>0">
                <div class="row">
                    <div class="col-sm-6">
                    </div>
                    <div class="col-sm-6">
                        <button type="button" class="btn btn-primary"><i class="fa fa-search"></i></button>
                        <div class="filter-group">
                            <input type="text" placeholder="Nom" class="form-control">
                        </div>
                        <div class="filter-group">
                            <input type="text" placeholder="Rôle" class="form-control">

                        </div>
                        <span class="filter-icon"><i class="fa fa-filter"></i></span>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover" *ngIf="myArray.length>0">
                <thead>
                    <tr>
                        <th class="col-4">Nom</th>
                        <th class="col-3">Prénom</th>

                        <th class="col-4">Nom d'utilisateur</th>
                        <th class="col-1">Rôle</th>
                        <th class="col-2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let userIterator of myArray">

                        <td>{{userIterator.lastname}}</td>
                        <td>{{userIterator.firstname}}</td>
                        <td>{{userIterator.email}}</td>
                        <td>{{userIterator.role}}</td>
                        <td>
                            <button (click)="editUser(userIterator)" type="button"
                                class="btn btn-primary btn-sm">Editer</button>
                            <a routerLink="/users" (click)="deleteUser(userIterator.id)" class="delete" title="Delete"
                                data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>